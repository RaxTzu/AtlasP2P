# ===========================================
# ATLASP2P - CLOUD SUPABASE MODE CONFIGURATION
# ===========================================
# This file is a TEMPLATE.
#
# Setup Instructions:
#   1. Create Supabase project at https://supabase.com
#   2. Run: make setup-cloud
#   3. This copies to .env (gitignored)
#   4. Edit .env with your Supabase Cloud credentials
#   5. Run: make cloud-dev
#
# Mode: Managed Supabase (Web + Crawler only, DB in cloud)
# Use when: Prefer managed database over local Docker
#
# Services included:
#   - Next.js (web app on port 4000)
#   - Python (crawler)
#   - Supabase Cloud (database, auth, storage, realtime)
#
# Before running:
#   1. Create Supabase project
#   2. Get credentials from Settings → API
#   3. Run migrations: supabase link && supabase db push
#   4. Create storage bucket (see docs)
# ===========================================

# -------------------------------------------
# SUPABASE CLOUD (REQUIRED)
# -------------------------------------------
# Get from: Dashboard → Settings → API

# Project URL (e.g., https://xxxxx.supabase.co)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Anon/Public Key (safe to expose to client)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service Role Key (KEEP SECRET - server-side only)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Supabase API URL (used by crawler for database access)
# Cloud mode: Use external HTTPS URL (same as public URL)
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase Internal URL (server-side container-to-container communication)
# Cloud mode: Use external HTTPS URL (same as public URL for cloud)
SUPABASE_INTERNAL_URL=https://your-project-ref.supabase.co

# -------------------------------------------
# DEVELOPMENT SETTINGS
# -------------------------------------------
NODE_ENV=development
PORT=4000

# -------------------------------------------
# GEOIP CONFIGURATION
# -------------------------------------------
GEOIP_DB_PATH=/app/data/geoip

# MaxMind credentials (optional - get free account)
# https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
MAXMIND_ACCOUNT_ID=
MAXMIND_LICENSE_KEY=

# -------------------------------------------
# EMAIL SERVICE SECRETS (PRODUCTION)
# -------------------------------------------
# Choose ONE provider (configured in project.config.yaml)

# Resend (recommended - https://resend.com)
RESEND_API_KEY=

# SendGrid (alternative - https://sendgrid.com)
SENDGRID_API_KEY=

# Custom SMTP (if using 'smtp' provider in config)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true

# -------------------------------------------
# SECURITY - TURNSTILE (CLOUDFLARE)
# -------------------------------------------
# Cloudflare Turnstile for bot protection
# Get keys at: https://dash.cloudflare.com/turnstile
#
# NOTE: Turnstile config (enabled, siteKey, protectedActions) is in config/project.config.yaml
# ONLY the secret key goes in .env for security!
TURNSTILE_SECRET_KEY=0x4AAAAAACHmrfqdjuWH8nhgwEVTDHAqZTE

# Cron Job Secret (security token for cron endpoints)
# Generate with: openssl rand -hex 32
# CRITICAL: Change this in production!
CRON_SECRET=your-super-secret-cron-token-change-in-production-min-32-chars

# -------------------------------------------
# RPC CONFIGURATION (OPTIONAL)
# -------------------------------------------
# Connect to local blockchain RPC node for peer discovery
# Useful for bootstrapping crawler with known peers
# Comment out if you don't have a local RPC node
RPC_HOST=localhost
RPC_PORT=8332
RPC_USER=rpcuser
RPC_PASS=rpcpassword

# -------------------------------------------
# SETUP CHECKLIST
# -------------------------------------------
# Before running make cloud-dev:
#
# □ Created Supabase project
# □ Updated NEXT_PUBLIC_SUPABASE_URL above
# □ Updated NEXT_PUBLIC_SUPABASE_ANON_KEY above
# □ Updated SUPABASE_SERVICE_ROLE_KEY above
# □ Ran migrations: supabase link && supabase db push
# □ Created storage bucket: run setup-supabase-storage.sql
# □ (Optional) Added MaxMind credentials
#
# Then run: make cloud-dev
